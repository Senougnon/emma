<!DOCTYPE html>
<html>
<head>
  <title>MeSomb Payment Form</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
  <h1>MeSomb Payment Form</h1>
  <form id="paymentForm">
    <label for="amount">Amount:</label>
    <input type="number" id="amount" name="amount" required><br><br>

    <label for="payer">Phone Number:</label>
    <input type="tel" id="payer" name="payer" placeholder="e.g. 670090909" required><br><br>

    <label for="service">Service:</label>
    <select id="service" name="service">
      <option value="MTN">MTN</option>
      <option value="ORANGE">ORANGE</option>
    </select><br><br>

    <button type="submit">Pay Now</button>
  </form>

  <div id="paymentResult" style="display: none;">
    <h2>Payment Result</h2>
    <p id="resultMessage"></p>
  </div>

  <script>
    $(document).ready(function() {
      $("#paymentForm").submit(function(event) {
        event.preventDefault();

        var amount = $("#amount").val();
        var payer = $("#payer").val();
        var service = $("#service").val();

        $.ajax({
          url: "https://mesomb.hachther.com/api/v1.1/payment/collect/",
          type: "POST",
          headers: {
            "X-MeSomb-Application": "9b80d408cb3b0577c2a8125bc0739cfcdca9d090", // Replace with your Application Key
            "Content-Type": "application/json"
          },
          data: JSON.stringify({
            "amount": amount,
            "payer": payer,
            "service": service,
            "country": "CM",
            "currency": "XAF"
          }),
          success: function(data) {
            if (data.success) {
              $("#resultMessage").text("Payment successful! Transaction ID: " + data.transaction.pk);
            } else {
              $("#resultMessage").text("Payment failed! " + data.message);
            }
            $("#paymentResult").show();
          },
          error: function(xhr, status, error) {
            $("#resultMessage").text("Payment failed! Error: " + error);
            $("#paymentResult").show();
          }
        });
      });
    });
  </script>
</body>
</html>
